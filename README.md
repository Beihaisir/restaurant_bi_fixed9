# 🍽️ 餐饮经营分析系统（多门店 / 多维度 / 半小时粒度）

## 运行
```bash
pip install -r requirements.txt
streamlit run app.py
```

## 输入文件（可一次上传多个文件）
- 日销售报表：.xls / .xlsx（首行“日销售报表”，第2行“导出人:门店代码”）
- 订单菜品报告：.xlsx / .csv（首行“菜品明细”，第2行“导出人:门店代码”）
- 订单支付报告：.xlsx / .csv（首行“支付明细”，第2行“导出人:门店代码”）
- 菜品分类规则模板：.xlsx（Sheet=规则表，列=分类/关键词）

> 系统会自动识别 store_id，并按 store_id 分组；缺表门店不会进入分析。

## 关键口径（已按确认实现）
- 时间筛选：最小 30 分钟分桶（基于菜品表创建时间；支付表时间用同单号在菜品表的最早创建时间）
- 规格占比：标准/宽面/细面(含天麻面)/米饭/宽粉(含“粉”)/无需主食；其他规格不统计
- 单加类：
  - 菜品名出现“加xx” → 单加（例外：加多宝 → 饮料）
  - 做法 JSON 内 name 出现“加xx” → 单加（例外：加多宝 → 饮料）
  - 单加类展示统一加前缀：单加-xxx
- 未分类：支持查看与导出（主菜与单加分别统计）
